fragment resultFields on SearchResult {
  name
  type
  startPreviewLineNumber
  startPreviewContent
  endPreviewLineNumber
  endPreviewContent
}

query search(
  $query: String!
  $projects: [ObjectId!]
  $repositories: [ObjectId!]
  $perpage: Int!
  $page: Int!
  $maxResultsPerFile: Int
) {
  search(
    query: $query
    projects: $projects
    repositories: $repositories
    perpage: $perpage
    page: $page,
    maxResultsPerFile: $maxResultsPerFile
  ) {
    _id
    name
    path
    location {
      owner
      repository
      image
    }
    language {
      name
      color
    }
    lines {
      start
      end
    }
    results {
      ...resultFields
    }
  }
}
